# Отчет о покрытии тестами

**Дата генерации:** 2026-01-12 22:24:23

## Общая статистика

| Метрика | Значение |
|---------|----------|
| Всего тестов | 57 |
| Успешно пройдено | 57 |
| Провалено | 0 |
| Пропущено | 0 |
| Ошибок | 0 |

## Покрытие по категориям тестов

### API Тесты
- **Количество тестов:** 56
- **Файлы тестов:** 1
    - `test_endpoint.py`

**Покрытие:**
- Позитивные сценарии: 9 тестов
- Негативные сценарии: 25 тестов
- Smoke тесты: 28 тестов

### Интеграционные тесты
- **Количество тестов:** 42
- **Файлы тестов:** 3
    - `test_auth_flow.py`
  - `test_external_service_integration.py`
  - `test_negative_scenarios.py`

**Покрытие:**
- Полные сценарии работы приложения
- Интеграция с внешними сервисами
- Проверка состояния между запросами
- Параллельные запросы

### Контрактные тесты
- **Количество тестов:** 16
- **Файлы тестов:** 1
    - `test_openapi.py`

**Покрытие:**
- Валидация структуры запросов и ответов
- Проверка HTTP статус кодов
- Валидация Content-Type
- Проверка формата JSON

### Нагрузочные тесты
- **Количество сценариев:** 4
- **Файлы тестов:** 1
    - `locustfile.py`

**Покрытие:**
- Обычная нагрузка (SpringBootUser)
- Негативные сценарии под нагрузкой (SpringBootNegativeUser)
- Скачки нагрузки (SpringBootSpikeUser)
- Стресс-тестирование (SpringBootStressUser)

## Позитивные и негативные сценарии

### Позитивные сценарии
Тесты, проверяющие успешное выполнение операций:
- Успешная аутентификация (LOGIN)
- Успешное выполнение действия (ACTION)
- Успешное завершение сессии (LOGOUT)
- Полный цикл работы токена
- Множественные действия после LOGIN
- Повторный LOGIN после LOGOUT
- Работа с несколькими токенами одновременно

**Количество:** 9 тестов

### Негативные сценарии
Тесты, проверяющие обработку ошибок и валидацию:
- Невалидные токены (пустые, неправильной длины, спецсимволы)
- Невалидные действия
- Отсутствующие параметры
- Неправильная авторизация (отсутствующий/неправильный API ключ)
- Действия без предварительной аутентификации
- SQL инъекции и XSS атаки
- Таймауты внешних сервисов
- Ошибки внешних сервисов
- Состояния гонки (race conditions)

**Количество:** 25 тестов

## Покрытие функциональности

### Эндпоинт /endpoint

#### Действие: LOGIN
- ✅ Успешная аутентификация
- ✅ Обработка ошибок внешнего сервиса
- ✅ Таймауты внешнего сервиса
- ✅ Валидация токена (формат, длина)
- ✅ Невалидные запросы
- ✅ Отсутствие API ключа
- ✅ Неправильный API ключ

#### Действие: ACTION
- ✅ Успешное выполнение после LOGIN
- ✅ Ошибка без предварительного LOGIN
- ✅ Обработка ошибок внешнего сервиса
- ✅ Множественные ACTION после одного LOGIN
- ✅ ACTION после LOGOUT
- ✅ Параллельные ACTION запросы

#### Действие: LOGOUT
- ✅ Успешное завершение сессии
- ✅ LOGOUT без предварительного LOGIN
- ✅ Повторный LOGOUT
- ✅ Проверка, что после LOGOUT ACTION не работает

### Интеграционные сценарии
- ✅ Полный цикл: LOGIN -> ACTION -> LOGOUT
- ✅ Независимость токенов
- ✅ Повторный LOGIN после LOGOUT
- ✅ Сохранение состояния между запросами
- ✅ Параллельные запросы
- ✅ Интеграция с WireMock
- ✅ Обработка недоступности внешнего сервиса

### Безопасность
- ✅ Валидация токенов
- ✅ Проверка API ключа
- ✅ Защита от SQL инъекций
- ✅ Защита от XSS атак
- ✅ Валидация входных данных

### Производительность
- ✅ Обычная нагрузка
- ✅ Скачки нагрузки (spike testing)
- ✅ Стресс-тестирование
- ✅ Негативные сценарии под нагрузкой

## Запуск тестов

### Все тесты
```bash
pdm run pytest
```

### По категориям
```bash
# API тесты
pdm run pytest tests/api/ -m api

# Интеграционные тесты
pdm run pytest tests/integration/ -m integration

# Контрактные тесты
pdm run pytest tests/contract/ -m contract
```

### Позитивные/негативные сценарии
```bash
# Только позитивные тесты
pdm run pytest -m positive

# Только негативные тесты
pdm run pytest -m negative
```

### Нагрузочные тесты
```bash
cd tests/performance
locust -f locustfile.py --host=http://localhost:8080
```

## Генерация отчетов

После запуска тестов отчеты сохраняются в `reports/`:
- `junit.xml` - JUnit XML отчет для CI/CD
- `report.html` - HTML отчет с детальной информацией

## Примечания

- Тесты могут требовать запущенное приложение и WireMock
- Некоторые тесты могут быть пропущены (skipped) при недоступности сервисов
- Нагрузочные тесты запускаются отдельно через Locust

---

*Отчет сгенерирован автоматически скриптом `scripts/generate_coverage_report.py`*
